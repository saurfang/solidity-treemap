<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>TreeMap · Solidity TreeMap</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="TreeMap · Solidity TreeMap"/><meta property="og:type" content="website"/><meta property="og:url" content="https://saurfang.github.io/solidity-treemap/index.html"/><meta property="og:description" content="&lt;div class=&quot;contract-doc&quot;&gt;&lt;div class=&quot;contract&quot;&gt;&lt;h2 class=&quot;contract-header&quot;&gt;&lt;span class=&quot;contract-kind&quot;&gt;library&lt;/span&gt; TreeMap&lt;/h2&gt;&lt;div class=&quot;source&quot;&gt;Source: &lt;a href=&quot;https://github.com/saurfang/solidity-treemap/blob/v0.0.1/contracts/TreeMap.sol&quot; target=&quot;_blank&quot;&gt;TreeMap.sol&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;index&quot;&gt;&lt;h2&gt;Index&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_applyColorInRemove&quot;&gt;_applyColorInRemove&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_child&quot;&gt;_child&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_decrementTreeSize&quot;&gt;_decrementTreeSize&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_flipColorInProbe&quot;&gt;_flipColorInProbe&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_incrementTreeSize&quot;&gt;_incrementTreeSize&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_isChildRed&quot;&gt;_isChildRed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_isRed&quot;&gt;_isRed&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_leftChild&quot;&gt;_leftChild&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_makeEntry&quot;&gt;_makeEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_rightChild&quot;&gt;_rightChild&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_rotateDouble&quot;&gt;_rotateDouble&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_rotateSingle&quot;&gt;_rotateSingle&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#_setRootToBlack&quot;&gt;_setRootToBlack&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#blackHeight&quot;&gt;blackHeight&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#ceilingEntry&quot;&gt;ceilingEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#firstEntry&quot;&gt;firstEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#floorEntry&quot;&gt;floorEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#get&quot;&gt;get&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#getOrDefault&quot;&gt;getOrDefault&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#higherEntry&quot;&gt;higherEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#lastEntry&quot;&gt;lastEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#lowerEntry&quot;&gt;lowerEntry&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#probe&quot;&gt;probe&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#put&quot;&gt;put&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#putIfAbsent&quot;&gt;putIfAbsent&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#rank&quot;&gt;rank&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#remove&quot;&gt;remove&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#select&quot;&gt;select&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;TreeMap.html#size&quot;&gt;size&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class=&quot;reference&quot;&gt;&lt;h2&gt;Reference&lt;/h2&gt;&lt;div class=&quot;functions&quot;&gt;&lt;h3&gt;Functions&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_applyColorInRemove&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_applyColorInRemove&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_applyColorInRemove&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _current, Entry _grandParent, uint8 _parentDirection) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Apply colors as necessary after rotation in top-down deletion factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_current&lt;/code&gt; - Entry&lt;/div&gt;&lt;div&gt;&lt;code&gt;_grandParent&lt;/code&gt; - Entry&lt;/div&gt;&lt;div&gt;&lt;code&gt;_parentDirection&lt;/code&gt; - uint8&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_child&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_child&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_child&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _entry, uint8 _direction) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (Entry) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an entry&amp;#x27;s child in a direction.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_entry&lt;/code&gt; - Entry&lt;/div&gt;&lt;div&gt;&lt;code&gt;_direction&lt;/code&gt; - uint8&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;Entry&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_decrementTreeSize&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_decrementTreeSize&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_decrementTreeSize&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Decrement tree size when entry is removed in `remove`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_flipColorInProbe&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_flipColorInProbe&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_flipColorInProbe&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _current) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Flip color if applicable during probe() factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_current&lt;/code&gt; - Entry&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_incrementTreeSize&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_incrementTreeSize&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_incrementTreeSize&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Increment tree size when new entry is added in `probe`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isChildRed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isChildRed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isChildRed&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _entry, uint8 _direction) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Check whether a entry&amp;#x27;s child is not NULL and its color is RED.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_entry&lt;/code&gt; - Entry&lt;/div&gt;&lt;div&gt;&lt;code&gt;_direction&lt;/code&gt; - uint8&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_isRed&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_isRed&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_isRed&lt;/strong&gt;&lt;span&gt;(Entry _entry) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Check whether a entry is not NULL and its color is RED.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_entry&lt;/code&gt; - Entry&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_leftChild&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_leftChild&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_leftChild&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _entry) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (Entry) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an entry&amp;#x27;s left child.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_entry&lt;/code&gt; - Entry&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;Entry&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_makeEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_makeEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_makeEntry&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key, uint _value) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (uint, Entry) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Creates a new entry and put it into `entries`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key with which the specified value is to be associated&lt;/div&gt;&lt;div&gt;&lt;code&gt;_value&lt;/code&gt; - value to be associated with the specified key&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;(index of the newly created entry, its storage pointer)&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_rightChild&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_rightChild&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_rightChild&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _entry) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (Entry) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Returns an entry&amp;#x27;s right child.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_entry&lt;/code&gt; - Entry&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;Entry&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_rotateDouble&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_rotateDouble&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_rotateDouble&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _root, uint _rootIdx, uint8 _direction) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Apply tree rotation around a root node in a specified direction twice. Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_root&lt;/code&gt; - root node to be rotated around&lt;/div&gt;&lt;div&gt;&lt;code&gt;_rootIdx&lt;/code&gt; - entry index of the root node&lt;/div&gt;&lt;div&gt;&lt;code&gt;_direction&lt;/code&gt; - rotation direction&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;entry index of the new root node&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_rotateSingle&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_rotateSingle&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_rotateSingle&lt;/strong&gt;&lt;span&gt;(Map _self, Entry _root, uint _rootIdx, uint8 _direction) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Single tree rotation around a root node in a specified direction. old root is colored red and new root is colored black.  ///  Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric.  ///  Illustration omits color for simplicity: 3(root)                   1(newRoot)  ///            /      \                   /     \  ///         1(newRoot) 4(*)  -&amp;gt;         0(*)      3(root)  ///      /      \                               /     \  ///   0(*)        2(*)                       2(*)      4(*) (*) means node preserve its previous children if applicable  /// @param _root root node to be rotated around.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_root&lt;/code&gt; - Entry&lt;/div&gt;&lt;div&gt;&lt;code&gt;_rootIdx&lt;/code&gt; - entry index of the root node&lt;/div&gt;&lt;div&gt;&lt;code&gt;_direction&lt;/code&gt; - rotation direction&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;entry index of the new root node&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;_setRootToBlack&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;_setRootToBlack&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;_setRootToBlack&lt;/strong&gt;&lt;span&gt;(Map _self) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Set root node to BLACK color factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;blackHeight&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;blackHeight&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;blackHeight&lt;/strong&gt;&lt;span&gt;(Map _self) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;This is useful to determine the size of stack to allocate for iterators implemented in contract since memory array cannot be resized NB: RBT guarantees the path from the root to the farthest leaf is no more than twice as long as the path from the root to the nearest leaf. O(log n), returns the black height of the tree: the uniform number of black nodes in all paths from root to the leaves.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;ceilingEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;ceilingEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;ceilingEntry&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns an entry associated with the least key greater than or equal to the given key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;firstEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;firstEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;firstEntry&lt;/strong&gt;&lt;span&gt;(Map _self) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns the entry associated with the lowest key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;floorEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;floorEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;floorEntry&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns an entry associated with the greatest key less than or equal to the given key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;get&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;get&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;get&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Find the value to which the `key` is associated, or not found if the map does not contain such mapping.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key whose associated value is to be returned&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;(whether a mapping with `key` exists, the value associated with the `key`)&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;getOrDefault&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;getOrDefault&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;getOrDefault&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key, uint _defaultValue) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Find the value to which the `key` is associated, or `defaultValue` if the map does not contain such mapping.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key whose associated value is to be returned&lt;/div&gt;&lt;div&gt;&lt;code&gt;_defaultValue&lt;/code&gt; - fallback value to be returned&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;the value associated with the `key` or `defaultValue` if not found&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;higherEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;higherEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;higherEntry&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns an entry associated with the least key greater than the given key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;lastEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;lastEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;lastEntry&lt;/strong&gt;&lt;span&gt;(Map _self) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns the entry associated with the highest key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;lowerEntry&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;lowerEntry&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;lowerEntry&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(log n), returns an entry associated with the greatest key less than the given key.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether such entry exists and its key and value&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;probe&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;probe&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;probe&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key, uint _value) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (Entry) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;New entry is eventaully inserted as `RED` at the bottom of the tree. The insertion never triggers a black violation. Color flip, single and double rotation is used to address red violation. Color flip guarantees siblings are never both red and enables rotation to fix red violation in one go., Insert `entry(key, value)` and returns a storage pointer to the `entry` corresponding to `key`. If a duplicate key is found, returns a storage pointer to the duplicate without replacement.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key with which the specified value is to be associated&lt;/div&gt;&lt;div&gt;&lt;code&gt;_value&lt;/code&gt; - value to be associated with the specified key&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;storage pointer to entry corresponding to the key&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;put&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;put&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;put&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key, uint _value) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (bool, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Insert `item(key, value)` and replace any existing value if `key` is already in the tree. return whether replacement occurred and value that was replaced.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key with which the specified value is to be associated&lt;/div&gt;&lt;div&gt;&lt;code&gt;_value&lt;/code&gt; - value to be associated with the specified key&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;(wether value is replaced, value associated with the key before replacement)&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;putIfAbsent&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;putIfAbsent&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;putIfAbsent&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key, uint _value) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Attempt to insert `item(key, value)` and returns `value` associated with `key` after insertion. If `key` already existed in the tree, its original value is returned and no replacement of the item occurs.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key with which the specified value is to be associated&lt;/div&gt;&lt;div&gt;&lt;code&gt;_value&lt;/code&gt; - value to be associated with the specified key&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;value associated with the specified key&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;rank&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;rank&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;rank&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Find the rank of element x in the tree, i.e. its index in the sorted list of elements of the tree.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;whether `_key` already existed in the map and its index (or insertion index if not found)&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;remove&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;remove&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;remove&lt;/strong&gt;&lt;span&gt;(Map _self, uint _key) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;returns  (bool, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Deletion can be made easy by a few observations: 1. A RED leaf can be removed without any violations 2. A RED node can be removed without any violations if it only has at most one branch by attaching that branch to the node&amp;#x27;s parent 3. If the node to be removed has more than one branch, it can be swapped with an easy-to-remove red node first  ///  The swap candidate must be the largest element of left branch or the smallest element of right branch. Here we choose to use the largest element of left branch. We create a false root node colored RED first and iterate down the tree. We &amp;quot;push&amp;quot; this red color down along the iterator such that we guarantee the node to be swapped is colored RED.  ///  Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric. &amp;quot;RIGHT&amp;quot; is picked also because we are looking for largest element after we found the matching entry. The rest of the search always traverse down to the right direction., remove mapping associated with `key` from the map if it is present and returns old `value` associated with the `key` if found.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_key&lt;/code&gt; - key whose mapping is to be removed&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;(whether a mapping has been removed, the value associated with the `key` before removal)&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;select&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;select&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;select&lt;/strong&gt;&lt;span&gt;(Map _self, uint _i) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (bool, uint, uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;Find the i&amp;#x27;th smallest element stored in the tree.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;div&gt;&lt;code&gt;_i&lt;/code&gt; - uint&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;bool&lt;/dd&gt;&lt;dd&gt;uint&lt;/dd&gt;&lt;dd&gt;uint&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;li&gt;&lt;div class=&quot;item function&quot;&gt;&lt;span id=&quot;size&quot; class=&quot;anchor-marker&quot;&gt;&lt;/span&gt;&lt;h4 class=&quot;name&quot;&gt;size&lt;/h4&gt;&lt;div class=&quot;body&quot;&gt;&lt;code class=&quot;signature&quot;&gt;function &lt;strong&gt;size&lt;/strong&gt;&lt;span&gt;(Map _self) &lt;/span&gt;&lt;span&gt;internal &lt;/span&gt;&lt;span&gt;view &lt;/span&gt;&lt;span&gt;returns  (uint) &lt;/span&gt;&lt;/code&gt;&lt;hr/&gt;&lt;div class=&quot;description&quot;&gt;&lt;p&gt;O(1), returns the size of the tree.&lt;/p&gt;&lt;/div&gt;&lt;dl&gt;&lt;dt&gt;&lt;span class=&quot;label-parameters&quot;&gt;Parameters:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;div&gt;&lt;code&gt;_self&lt;/code&gt; - Map&lt;/div&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span class=&quot;label-return&quot;&gt;Returns:&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;uint&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"/><link rel="shortcut icon" href="/solidity-treemap/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,700,400italic,700italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/solidity-treemap/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/solidity-treemap/"><h2 class="headerTitle">Solidity TreeMap</h2></a><a href="/solidity-treemap/versions.html"><h3>0.0.1</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="https://saurfang.github.io/solidity-treemap" target="_self">Home</a></li><li><a href="https://github.com/saurfang/solidity-treemap" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>UNCATEGORIZED</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>UNCATEGORIZED</h3><ul><li class="navListItem"><a class="navItem" href="/solidity-treemap/docs/MathUtil.html">MathUtil</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/solidity-treemap/docs/TreeMap.html">TreeMap</a></li><li class="navListItem"><a class="navItem" href="/solidity-treemap/docs/TreeMapIterator.html">TreeMapIterator</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>TreeMap</h1></header><article><div><span><div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">library</span> TreeMap</h2><div class="source">Source: <a href="https://github.com/saurfang/solidity-treemap/blob/v0.0.1/contracts/TreeMap.sol" target="_blank">TreeMap.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="TreeMap.html#_applyColorInRemove">_applyColorInRemove</a></li><li><a href="TreeMap.html#_child">_child</a></li><li><a href="TreeMap.html#_decrementTreeSize">_decrementTreeSize</a></li><li><a href="TreeMap.html#_flipColorInProbe">_flipColorInProbe</a></li><li><a href="TreeMap.html#_incrementTreeSize">_incrementTreeSize</a></li><li><a href="TreeMap.html#_isChildRed">_isChildRed</a></li><li><a href="TreeMap.html#_isRed">_isRed</a></li><li><a href="TreeMap.html#_leftChild">_leftChild</a></li><li><a href="TreeMap.html#_makeEntry">_makeEntry</a></li><li><a href="TreeMap.html#_rightChild">_rightChild</a></li><li><a href="TreeMap.html#_rotateDouble">_rotateDouble</a></li><li><a href="TreeMap.html#_rotateSingle">_rotateSingle</a></li><li><a href="TreeMap.html#_setRootToBlack">_setRootToBlack</a></li><li><a href="TreeMap.html#blackHeight">blackHeight</a></li><li><a href="TreeMap.html#ceilingEntry">ceilingEntry</a></li><li><a href="TreeMap.html#firstEntry">firstEntry</a></li><li><a href="TreeMap.html#floorEntry">floorEntry</a></li><li><a href="TreeMap.html#get">get</a></li><li><a href="TreeMap.html#getOrDefault">getOrDefault</a></li><li><a href="TreeMap.html#higherEntry">higherEntry</a></li><li><a href="TreeMap.html#lastEntry">lastEntry</a></li><li><a href="TreeMap.html#lowerEntry">lowerEntry</a></li><li><a href="TreeMap.html#probe">probe</a></li><li><a href="TreeMap.html#put">put</a></li><li><a href="TreeMap.html#putIfAbsent">putIfAbsent</a></li><li><a href="TreeMap.html#rank">rank</a></li><li><a href="TreeMap.html#remove">remove</a></li><li><a href="TreeMap.html#select">select</a></li><li><a href="TreeMap.html#size">size</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="_applyColorInRemove" class="anchor-marker"></span><h4 class="name">_applyColorInRemove</h4><div class="body"><code class="signature">function <strong>_applyColorInRemove</strong><span>(Map _self, Entry _current, Entry _grandParent, uint8 _parentDirection) </span><span>internal </span></code><hr/><div class="description"><p>Apply colors as necessary after rotation in top-down deletion factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_current</code> - Entry</div><div><code>_grandParent</code> - Entry</div><div><code>_parentDirection</code> - uint8</div></dd></dl></div></div></li><li><div class="item function"><span id="_child" class="anchor-marker"></span><h4 class="name">_child</h4><div class="body"><code class="signature">function <strong>_child</strong><span>(Map _self, Entry _entry, uint8 _direction) </span><span>internal </span><span>view </span><span>returns  (Entry) </span></code><hr/><div class="description"><p>Returns an entry&#x27;s child in a direction.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_entry</code> - Entry</div><div><code>_direction</code> - uint8</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Entry</dd></dl></div></div></li><li><div class="item function"><span id="_decrementTreeSize" class="anchor-marker"></span><h4 class="name">_decrementTreeSize</h4><div class="body"><code class="signature">function <strong>_decrementTreeSize</strong><span>(Map _self, uint _key) </span><span>internal </span></code><hr/><div class="description"><p>Decrement tree size when entry is removed in `remove`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd></dl></div></div></li><li><div class="item function"><span id="_flipColorInProbe" class="anchor-marker"></span><h4 class="name">_flipColorInProbe</h4><div class="body"><code class="signature">function <strong>_flipColorInProbe</strong><span>(Map _self, Entry _current) </span><span>internal </span></code><hr/><div class="description"><p>Flip color if applicable during probe() factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_current</code> - Entry</div></dd></dl></div></div></li><li><div class="item function"><span id="_incrementTreeSize" class="anchor-marker"></span><h4 class="name">_incrementTreeSize</h4><div class="body"><code class="signature">function <strong>_incrementTreeSize</strong><span>(Map _self, uint _key) </span><span>internal </span></code><hr/><div class="description"><p>Increment tree size when new entry is added in `probe`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd></dl></div></div></li><li><div class="item function"><span id="_isChildRed" class="anchor-marker"></span><h4 class="name">_isChildRed</h4><div class="body"><code class="signature">function <strong>_isChildRed</strong><span>(Map _self, Entry _entry, uint8 _direction) </span><span>internal </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check whether a entry&#x27;s child is not NULL and its color is RED.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_entry</code> - Entry</div><div><code>_direction</code> - uint8</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="_isRed" class="anchor-marker"></span><h4 class="name">_isRed</h4><div class="body"><code class="signature">function <strong>_isRed</strong><span>(Entry _entry) </span><span>internal </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check whether a entry is not NULL and its color is RED.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_entry</code> - Entry</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="_leftChild" class="anchor-marker"></span><h4 class="name">_leftChild</h4><div class="body"><code class="signature">function <strong>_leftChild</strong><span>(Map _self, Entry _entry) </span><span>internal </span><span>view </span><span>returns  (Entry) </span></code><hr/><div class="description"><p>Returns an entry&#x27;s left child.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_entry</code> - Entry</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Entry</dd></dl></div></div></li><li><div class="item function"><span id="_makeEntry" class="anchor-marker"></span><h4 class="name">_makeEntry</h4><div class="body"><code class="signature">function <strong>_makeEntry</strong><span>(Map _self, uint _key, uint _value) </span><span>internal </span><span>returns  (uint, Entry) </span></code><hr/><div class="description"><p>Creates a new entry and put it into `entries`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key with which the specified value is to be associated</div><div><code>_value</code> - value to be associated with the specified key</div></dd><dt><span class="label-return">Returns:</span></dt><dd>(index of the newly created entry, its storage pointer)</dd></dl></div></div></li><li><div class="item function"><span id="_rightChild" class="anchor-marker"></span><h4 class="name">_rightChild</h4><div class="body"><code class="signature">function <strong>_rightChild</strong><span>(Map _self, Entry _entry) </span><span>internal </span><span>view </span><span>returns  (Entry) </span></code><hr/><div class="description"><p>Returns an entry&#x27;s right child.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_entry</code> - Entry</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Entry</dd></dl></div></div></li><li><div class="item function"><span id="_rotateDouble" class="anchor-marker"></span><h4 class="name">_rotateDouble</h4><div class="body"><code class="signature">function <strong>_rotateDouble</strong><span>(Map _self, Entry _root, uint _rootIdx, uint8 _direction) </span><span>internal </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Apply tree rotation around a root node in a specified direction twice. Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_root</code> - root node to be rotated around</div><div><code>_rootIdx</code> - entry index of the root node</div><div><code>_direction</code> - rotation direction</div></dd><dt><span class="label-return">Returns:</span></dt><dd>entry index of the new root node</dd></dl></div></div></li><li><div class="item function"><span id="_rotateSingle" class="anchor-marker"></span><h4 class="name">_rotateSingle</h4><div class="body"><code class="signature">function <strong>_rotateSingle</strong><span>(Map _self, Entry _root, uint _rootIdx, uint8 _direction) </span><span>internal </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Single tree rotation around a root node in a specified direction. old root is colored red and new root is colored black.  ///  Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric.  ///  Illustration omits color for simplicity: 3(root)                   1(newRoot)  ///            /      \                   /     \  ///         1(newRoot) 4(*)  -&gt;         0(*)      3(root)  ///      /      \                               /     \  ///   0(*)        2(*)                       2(*)      4(*) (*) means node preserve its previous children if applicable  /// @param _root root node to be rotated around.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_root</code> - Entry</div><div><code>_rootIdx</code> - entry index of the root node</div><div><code>_direction</code> - rotation direction</div></dd><dt><span class="label-return">Returns:</span></dt><dd>entry index of the new root node</dd></dl></div></div></li><li><div class="item function"><span id="_setRootToBlack" class="anchor-marker"></span><h4 class="name">_setRootToBlack</h4><div class="body"><code class="signature">function <strong>_setRootToBlack</strong><span>(Map _self) </span><span>internal </span></code><hr/><div class="description"><p>Set root node to BLACK color factored out to avoid `CompilerError: Stack too deep, try removing local variables.`.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div></dd></dl></div></div></li><li><div class="item function"><span id="blackHeight" class="anchor-marker"></span><h4 class="name">blackHeight</h4><div class="body"><code class="signature">function <strong>blackHeight</strong><span>(Map _self) </span><span>internal </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>This is useful to determine the size of stack to allocate for iterators implemented in contract since memory array cannot be resized NB: RBT guarantees the path from the root to the farthest leaf is no more than twice as long as the path from the root to the nearest leaf. O(log n), returns the black height of the tree: the uniform number of black nodes in all paths from root to the leaves.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint</dd></dl></div></div></li><li><div class="item function"><span id="ceilingEntry" class="anchor-marker"></span><h4 class="name">ceilingEntry</h4><div class="body"><code class="signature">function <strong>ceilingEntry</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns an entry associated with the least key greater than or equal to the given key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="firstEntry" class="anchor-marker"></span><h4 class="name">firstEntry</h4><div class="body"><code class="signature">function <strong>firstEntry</strong><span>(Map _self) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns the entry associated with the lowest key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="floorEntry" class="anchor-marker"></span><h4 class="name">floorEntry</h4><div class="body"><code class="signature">function <strong>floorEntry</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns an entry associated with the greatest key less than or equal to the given key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="get" class="anchor-marker"></span><h4 class="name">get</h4><div class="body"><code class="signature">function <strong>get</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint) </span></code><hr/><div class="description"><p>Find the value to which the `key` is associated, or not found if the map does not contain such mapping.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key whose associated value is to be returned</div></dd><dt><span class="label-return">Returns:</span></dt><dd>(whether a mapping with `key` exists, the value associated with the `key`)</dd></dl></div></div></li><li><div class="item function"><span id="getOrDefault" class="anchor-marker"></span><h4 class="name">getOrDefault</h4><div class="body"><code class="signature">function <strong>getOrDefault</strong><span>(Map _self, uint _key, uint _defaultValue) </span><span>internal </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Find the value to which the `key` is associated, or `defaultValue` if the map does not contain such mapping.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key whose associated value is to be returned</div><div><code>_defaultValue</code> - fallback value to be returned</div></dd><dt><span class="label-return">Returns:</span></dt><dd>the value associated with the `key` or `defaultValue` if not found</dd></dl></div></div></li><li><div class="item function"><span id="higherEntry" class="anchor-marker"></span><h4 class="name">higherEntry</h4><div class="body"><code class="signature">function <strong>higherEntry</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns an entry associated with the least key greater than the given key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="lastEntry" class="anchor-marker"></span><h4 class="name">lastEntry</h4><div class="body"><code class="signature">function <strong>lastEntry</strong><span>(Map _self) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns the entry associated with the highest key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="lowerEntry" class="anchor-marker"></span><h4 class="name">lowerEntry</h4><div class="body"><code class="signature">function <strong>lowerEntry</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>O(log n), returns an entry associated with the greatest key less than the given key.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether such entry exists and its key and value</dd></dl></div></div></li><li><div class="item function"><span id="probe" class="anchor-marker"></span><h4 class="name">probe</h4><div class="body"><code class="signature">function <strong>probe</strong><span>(Map _self, uint _key, uint _value) </span><span>internal </span><span>returns  (Entry) </span></code><hr/><div class="description"><p>New entry is eventaully inserted as `RED` at the bottom of the tree. The insertion never triggers a black violation. Color flip, single and double rotation is used to address red violation. Color flip guarantees siblings are never both red and enables rotation to fix red violation in one go., Insert `entry(key, value)` and returns a storage pointer to the `entry` corresponding to `key`. If a duplicate key is found, returns a storage pointer to the duplicate without replacement.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key with which the specified value is to be associated</div><div><code>_value</code> - value to be associated with the specified key</div></dd><dt><span class="label-return">Returns:</span></dt><dd>storage pointer to entry corresponding to the key</dd></dl></div></div></li><li><div class="item function"><span id="put" class="anchor-marker"></span><h4 class="name">put</h4><div class="body"><code class="signature">function <strong>put</strong><span>(Map _self, uint _key, uint _value) </span><span>internal </span><span>returns  (bool, uint) </span></code><hr/><div class="description"><p>Insert `item(key, value)` and replace any existing value if `key` is already in the tree. return whether replacement occurred and value that was replaced.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key with which the specified value is to be associated</div><div><code>_value</code> - value to be associated with the specified key</div></dd><dt><span class="label-return">Returns:</span></dt><dd>(wether value is replaced, value associated with the key before replacement)</dd></dl></div></div></li><li><div class="item function"><span id="putIfAbsent" class="anchor-marker"></span><h4 class="name">putIfAbsent</h4><div class="body"><code class="signature">function <strong>putIfAbsent</strong><span>(Map _self, uint _key, uint _value) </span><span>internal </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Attempt to insert `item(key, value)` and returns `value` associated with `key` after insertion. If `key` already existed in the tree, its original value is returned and no replacement of the item occurs.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key with which the specified value is to be associated</div><div><code>_value</code> - value to be associated with the specified key</div></dd><dt><span class="label-return">Returns:</span></dt><dd>value associated with the specified key</dd></dl></div></div></li><li><div class="item function"><span id="rank" class="anchor-marker"></span><h4 class="name">rank</h4><div class="body"><code class="signature">function <strong>rank</strong><span>(Map _self, uint _key) </span><span>internal </span><span>view </span><span>returns  (bool, uint) </span></code><hr/><div class="description"><p>Find the rank of element x in the tree, i.e. its index in the sorted list of elements of the tree.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>whether `_key` already existed in the map and its index (or insertion index if not found)</dd></dl></div></div></li><li><div class="item function"><span id="remove" class="anchor-marker"></span><h4 class="name">remove</h4><div class="body"><code class="signature">function <strong>remove</strong><span>(Map _self, uint _key) </span><span>internal </span><span>returns  (bool, uint) </span></code><hr/><div class="description"><p>Deletion can be made easy by a few observations: 1. A RED leaf can be removed without any violations 2. A RED node can be removed without any violations if it only has at most one branch by attaching that branch to the node&#x27;s parent 3. If the node to be removed has more than one branch, it can be swapped with an easy-to-remove red node first  ///  The swap candidate must be the largest element of left branch or the smallest element of right branch. Here we choose to use the largest element of left branch. We create a false root node colored RED first and iterate down the tree. We &quot;push&quot; this red color down along the iterator such that we guarantee the node to be swapped is colored RED.  ///  Inline code documentation assumes `direction` = `RIGHT` for simplicity and one can see both cases are symmetric. &quot;RIGHT&quot; is picked also because we are looking for largest element after we found the matching entry. The rest of the search always traverse down to the right direction., remove mapping associated with `key` from the map if it is present and returns old `value` associated with the `key` if found.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_key</code> - key whose mapping is to be removed</div></dd><dt><span class="label-return">Returns:</span></dt><dd>(whether a mapping has been removed, the value associated with the `key` before removal)</dd></dl></div></div></li><li><div class="item function"><span id="select" class="anchor-marker"></span><h4 class="name">select</h4><div class="body"><code class="signature">function <strong>select</strong><span>(Map _self, uint _i) </span><span>internal </span><span>view </span><span>returns  (bool, uint, uint) </span></code><hr/><div class="description"><p>Find the i&#x27;th smallest element stored in the tree.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div><div><code>_i</code> - uint</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd><dd>uint</dd><dd>uint</dd></dl></div></div></li><li><div class="item function"><span id="size" class="anchor-marker"></span><h4 class="name">size</h4><div class="body"><code class="signature">function <strong>size</strong><span>(Map _self) </span><span>internal </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>O(1), returns the size of the tree.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_self</code> - Map</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint</dd></dl></div></div></li></ul></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="MathUtil.html">← MathUtil</a><a class="docs-next button" href="TreeMapIterator.html">TreeMapIterator →</a></div></div></div></div><footer class="nav-footer" id="footer"></footer></div></body></html>